<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Traffic Management</title>
  
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #000000, #267075, #000000);
      color: #e6edf3;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .card {
      width: 100%;
      max-width: 700px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(6px);
    }
    h1,h2 { margin-top:0; color:#fff; }
    input {
      margin: 6px 0;
      padding: 10px;
      width: 90%;
      border-radius: 6px;
      border: 1px solid #555;
      background: rgba(255,255,255,0.1);
      color: #fff;
    }
    .btn {
      margin: 6px;
      padding: 10px 16px;
      border-radius: 8px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background: #2563eb;
      color: white;
      transition: transform 0.2s;
    }
    .btn:hover { transform: scale(1.05); }
    .hidden { display:none; }
    .msg { margin-top: 10px; padding: 8px; border-radius: 6px; }
    .ok { background:#16a34a44; color:#16a34a; }
    .err { background:#dc262644; color:#dc2626; }
  </style>
</head>
<body>
  <div class="card">
    <!-- Home Screen -->
    <div id="homeScreen">
      <h1>üö¶ Smart Traffic Management</h1>
      <h2>Select Role</h2>
      <button class="btn" onclick="goToScreen('userLogin')">Citizen</button>
      <button class="btn" onclick="goToScreen('userLogin')">Operator</button>
      <button class="btn" onclick="goToScreen('adminLogin')">Admin</button>
      <button class="btn" onclick="goToScreen('gpsScreen')">üìç Live GPS</button>
    </div>

    <!-- User Login -->
    <div id="userLogin" class="hidden">
      <h2>User Login</h2>
      <input id="userId" type="text" placeholder="User ID (e.g. user1)" /><br>
      <input id="userPwd" type="password" placeholder="Password" /><br>
      <button class="btn" onclick="userLogin()">Login</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Back</button>
      <div id="userMsg" class="msg"></div>
    </div>

    <!-- Admin Login -->
    <div id="adminLogin" class="hidden">
      <h2>Admin Login</h2>
      <input id="email" type="email" placeholder="Admin Email" /><br>
      <input id="pwd" type="password" placeholder="Password" /><br>
      <button class="btn" onclick="adminLogin()">Login</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Back</button>
      <div id="loginMsg" class="msg"></div>
    </div>

    <!-- Task Selection -->
    <div id="taskScreen" class="hidden">
      <h2>Select Feature</h2>
      <button class="btn" onclick="doTask('View Traffic')">View Traffic</button>
      <button class="btn" onclick="doTask('Report Incident')">Report Incident</button>
      <button class="btn" onclick="doTask('Check Parking')">Check Parking</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Logout</button>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="hidden">
      <h2>Result</h2>
      <div id="resultMsg" class="msg ok"></div>
      <p>Satisfied?</p>
      <button class="btn" onclick="goToScreen('homeScreen')">Yes ‚Üí Exit</button>
      <button class="btn" onclick="goToScreen('taskScreen')">No ‚Üí Retry</button>
    </div>

    <!-- GPS Location -->
    <div id="gpsScreen" class="hidden">
      <h2>üìç Live Location</h2>
      <p id="gpsOutput">Fetching location...</p>
      <button class="btn" onclick="getLocation()">Update GPS</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Back</button>
    </div>
  </div>

  <script>
    // Demo Users
    const USERS = { "user1": "1234", "operator1": "abcd" };
    const ADMINS = { "ram123@gmail.com": "RAM123" };

    let currentScreen = "homeScreen";

    function goToScreen(id){
      document.getElementById(currentScreen).classList.add("hidden");
      document.getElementById(id).classList.remove("hidden");
      currentScreen = id;
      if(id==="gpsScreen") getLocation();
    }

    // User login
    function userLogin(){
      const id = document.getElementById("userId").value.trim();
      const pwd = document.getElementById("userPwd").value.trim();
      const msg = document.getElementById("userMsg");
      if(USERS[id]===pwd){
        msg.textContent="‚úÖ Login success!";
        msg.className="msg ok";
        setTimeout(()=>goToScreen("taskScreen"),1000);
      }else{
        msg.textContent="‚ùå Invalid User ID or Password!";
        msg.className="msg err";
      }
    }

    // Admin login
    function adminLogin(){
      const email = document.getElementById("email").value.trim();
      const pwd = document.getElementById("pwd").value.trim();
      const msg = document.getElementById("loginMsg");
      if(ADMINS[email]===pwd){
        msg.textContent="‚úÖ Admin login success!";
        msg.className="msg ok";
        setTimeout(()=>goToScreen("taskScreen"),1000);
      }else{
        msg.textContent="‚ùå Invalid credentials!";
        msg.className="msg err";
      }
    }

    // Tasks
    function doTask(task){
      let result = "";
      if(task==="View Traffic"){
        result = "Traffic congestion moderate near City Center üöó";
      } else if(task==="Report Incident"){
        result = "Incident reported successfully ‚ö†Ô∏è";
      } else if(task==="Check Parking"){
        result = "10 parking spots available üÖøÔ∏è";
      }
      document.getElementById("resultMsg").textContent=result;
      goToScreen("resultScreen");
    }

    // GPS
    function getLocation(){
      const out=document.getElementById("gpsOutput");
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(pos=>{
          out.textContent=`Lat: ${pos.coords.latitude.toFixed(4)}, Lng: ${pos.coords.longitude.toFixed(4)}`;
        }, err=>{
          out.textContent="‚ùå Location access denied.";
        });
      }else{
        out.textContent="‚ùå Geolocation not supported.";
      }
    }
  </script>
</body>
</html>
